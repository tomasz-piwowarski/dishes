import Head from 'next/head';
import Form from '@/components/Form';
import { DishesData } from '@/types';
import useForm from '@/hooks/useForm';
import { useState } from 'react';
import Dishes from '@/components/Dishes/Dishes';
import { Box, AppBar, Toolbar, IconButton, Typography } from '@mui/material';

export default function Home() {
  const [dishes, setDishes] = useState<DishesData[]>([]);

  const { sendDishes } = useForm();

  const handleSubmit = async (values: DishesData) => {
    const response = await sendDishes(values);

    setDishes((prev) => [...prev, response]);
  };

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Box
        sx={{ minHeight: '100vh', display: 'flex', flexDirection: 'column' }}
      >
        <AppBar position="static">
          <Toolbar>
            <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
              Dishes
            </Typography>
          </Toolbar>
        </AppBar>
        <Box
          sx={{
            display: 'flex',
            flexDirection: { xs: 'column', md: 'row' },
            flex: 1,
          }}
        >
          <Box
            sx={{
              width: { md: '25%' },
              px: 2,
              py: 4,
              boxShadow: 2,
              backgroundColor: 'white',
              borderBottomLeftRadius: '3%',
              borderBottomRightRadius: '3%',
            }}
          >
            <Form onSubmit={handleSubmit} />
          </Box>
          <Box
            sx={{
              p: 4,
              width: { md: '75%' },
            }}
          >
            <Dishes dishes={dishes} />
          </Box>
        </Box>
      </Box>
    </>
  );
}
